{% load static %}
<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description"
          content="Browse books, read details, discover authors and genres, and explore your next read." />
    <meta name="theme-color" content="#0f766e" />

    <script src="https://cdn.tailwindcss.com"></script>

    <title>{% block title %}Home{% endblock %} | books</title>

    {% block extra_head %}{% endblock %}
  </head>

  <body class="min-h-screen flex flex-col bg-slate-50 text-slate-900">
    <a href="#main"
       class="sr-only focus:not-sr-only focus:fixed focus:top-3 focus:left-3 focus:z-50 focus:rounded-md focus:bg-white focus:px-3 focus:py-2 focus:shadow">
      Skip to content
    </a>

    {% with request.resolver_match.url_name as url_name %}
    <header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-slate-200">
      <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
        <a href="/" class="text-xl font-extrabold tracking-tight">books</a>

        <div class="flex items-center gap-4 sm:gap-6">
          <a href="{% url 'item:new' %}"
             class="text-sm sm:text-base font-semibold hover:text-slate-600 {% if url_name == 'new' %}underline{% endif %}">
            New item
          </a>

          <a href="{% url 'item:items' %}"
             class="text-sm sm:text-base font-semibold hover:text-slate-600 {% if url_name == 'items' %}underline{% endif %}">
            Browse
          </a>

          {% if request.user.is_authenticated %}
            <a href="{% url 'conversation:inbox' %}"
               class="px-4 py-2 text-sm sm:text-base font-semibold rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">
              Inbox
            </a>
            <a href="{% url 'dashboard:index' %}"
               class="px-4 py-2 text-sm sm:text-base font-semibold rounded-xl bg-slate-600 text-white hover:bg-slate-700">
              Dashboard
            </a>
            <!-- Logout (GET to LogoutView) -->
            <a href="{% url 'core:logout' %}"
               class="px-4 py-2 text-sm sm:text-base font-semibold rounded-xl border border-slate-300 hover:bg-slate-50">
              Log out
            </a>
          {% else %}
            <a href="{% url 'core:signup' %}"
               class="px-4 py-2 text-sm sm:text-base font-semibold rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">
              Sign up
            </a>
            <a href="{% url 'core:login' %}"
               class="px-4 py-2 text-sm sm:text-base font-semibold rounded-xl bg-slate-600 text-white hover:bg-slate-700">
              Log in
            </a>
          {% endif %}
        </div>
      </nav>
    </header>
    {% endwith %}

    {% if messages %}
      <div class="max-w-3xl mx-auto mt-4 px-4">
        <ul class="space-y-2">
          {% for message in messages %}
            <li class="rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm">
              {{ message }}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <main id="main" class="flex-1">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {% block content %}{% endblock %}
      </div>
    </main>

    <footer class="mt-8 border-t border-slate-200 bg-slate-900 text-slate-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 grid gap-8 md:grid-cols-3">
        <div class="md:col-span-2">
          <h3 class="mb-3 font-semibold">About</h3>
          <p class="max-w-2xl text-slate-400">
            Welcome to our book explorer â€” a simple, clean website where you can browse titles,
            dive into detailed summaries, discover authors and genres, and find new reads to explore.
          </p>
        </div>

        <div>
          <h3 class="mb-3 font-semibold">Menu</h3>
          <ul class="space-y-2">
            <li><a href="#" class="hover:text-emerald-400">About</a></li>
            <li><a href="{% url 'core:contact' %}" class="hover:text-emerald-400">Contact</a></li>
            <li><a href="#" class="hover:text-emerald-400">Privacy policy</a></li>
            <li><a href="#" class="hover:text-emerald-400">Terms of use</a></li>
          </ul>
        </div>
      </div>

      <div class="border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 text-xs text-slate-500 flex items-center justify-between">
          <span>&copy; {% now "Y" %} books. All rights reserved.</span>
          <span>Made with Django &amp; Tailwind</span>
        </div>
      </div>
    </footer>

    {% block extra_scripts %}{% endblock %}
  </body>
</html>
